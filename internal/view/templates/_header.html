{{ define "_header.html" }}
<header class="main-header">
  {{/* L칩gica principal: verifica se o usu치rio est치 logado */}} {{ if
  .IsLoggedIn }} {{/* L칩gica do Logo: link din칙mico */}} {{ if eq .User.Tipo
  "cliente" }}
  <div class="logo"><a href="/cliente/dashboard">Meu Cupcake</a></div>
  {{ else if eq .User.Tipo "lojista" }}
  <div class="logo"><a href="/lojista/dashboard">Meu Cupcake</a></div>
  {{ else }}
  <div class="logo"><a href="/">Meu Cupcake</a></div>
  {{ end }} {{/* Navega칞칚o separada por tipo */}} {{ if eq .User.Tipo "lojista"
  }}
  <nav class="nav-links">
    <a href="/logout" class="btn btn-primary">Sair</a>
  </nav>
  {{ else if eq .User.Tipo "cliente" }}
  <nav class="nav-links">
    <a href="/carrinho" class="cart-icon-link">
      游 {{ if gt .CartItemCount 0 }}
      <span class="cart-badge">{{ .CartItemCount }}</span>
      {{ end }}
    </a>
    {{ if ne .ActivePage "vitrine" }}<a
      href="/vitrine"
      class="btn btn-secondary"
      >Vitrine</a
    >{{ end }}

    <a href="/perfil" class="btn btn-secondary">Meu Perfil</a>
    <a href="/logout" class="btn btn-primary">Sair</a>
  </nav>
  {{ else }}
  <nav class="nav-links">
    <a href="/logout" class="btn btn-primary">Sair</a>
  </nav>
  {{ end }} {{ else }}
  <div class="logo"><a href="/">Meu Cupcake</a></div>

  <nav class="nav-links">
    {{/* --- CORRE칂츾O AQUI: Adiciona classes ao link Vitrine --- */}} {{ if ne
    .ActivePage "vitrine" }}<a href="/vitrine" class="btn btn-secondary"
      >Vitrine</a
    >{{ end }}
    <a href="/carrinho" class="cart-icon-link">
      游 {{ if gt .CartItemCount 0 }}
      <span class="cart-badge">{{ .CartItemCount }}</span>
      {{ end }}
    </a>
    <a href="/login" class="btn btn-secondary">Entrar</a>
    <a href="/cadastro" class="btn btn-primary">Cadastrar</a>
  </nav>
  {{ end }} {{/* Fim do if .IsLoggedIn */}}
</header>

<style>
  /* --- ESTILOS DO 칈CONE DO CARRINHO E BADGE --- */

  .cart-icon-link {
    position: relative; /* Necess치rio para posicionar o badge relativo a este link */
    text-decoration: none;
    font-size: 1.5rem; /* Tamanho do 칤cone de carrinho (游) */
    color: #333; /* Cor do 칤cone */
    margin: 0 0.5rem; /* Espa칞amento ao redor do 칤cone */
    display: inline-block; /* Garante que a posi칞칚o relativa funcione corretamente */
  }

  .cart-badge {
    position: absolute; /* Posiciona o badge em rela칞칚o ao .cart-icon-link */
    top: -8px; /* Desloca o badge um pouco para cima */
    right: -10px; /* Desloca o badge um pouco para a direita */
    background-color: red; /* Cor de fundo da bolinha */
    color: white; /* Cor do n칰mero dentro da bolinha */
    border-radius: 50%; /* Faz o formato de c칤rculo */
    padding: 2px 6px; /* Espa칞amento interno (vertical, horizontal) */
    font-size: 0.75rem; /* Tamanho da fonte do n칰mero */
    font-weight: bold;
    line-height: 1; /* Garante que o n칰mero fique centralizado verticalmente */
    min-width: 10px; /* Largura m칤nima para garantir que a bolinha apare칞a mesmo com 1 d칤gito */
    text-align: center;
    box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.1); /* Sombra sutil opcional */
  }
</style>
{{ end }} {{/* Fim do define "_header.html" */}}
